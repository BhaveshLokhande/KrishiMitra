<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agri Knowledge Base - Pune Region</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --primary:#2e7d32;
  --secondary:#f4f4f4;
  --accent:#1976d2;
  --danger:#c62828;
  --warning:#f9a825;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Arial, sans-serif;}
body{background:#fafafa;color:#333;}

header{
  background:var(--primary);
  color:white;
  padding:1rem;
  display:flex;
  flex-direction:column;
  gap:0.5rem;
}

header h1{font-size:1.2rem;}

.top-controls{
  display:flex;
  gap:0.5rem;
}

header input{
  padding:0.5rem;
  border:none;
  border-radius:4px;
  flex:1;
}

.lang-toggle{
  background:white;
  color:var(--primary);
  border:none;
  border-radius:4px;
  padding:0.5rem;
  cursor:pointer;
  font-weight:bold;
}

.container{display:flex;flex-direction:column;}

.sidebar{
  background:white;
  padding:1rem;
  border-bottom:1px solid #ddd;
}

.sidebar h3{margin-bottom:0.5rem;}

.sidebar button{
  width:100%;
  padding:0.5rem;
  margin-bottom:0.5rem;
  border:none;
  background:var(--secondary);
  cursor:pointer;
  border-radius:4px;
}

.sidebar button:hover{background:#e0e0e0;}

.main{padding:1rem;}

.snapshot{
  background:white;
  padding:1rem;
  border-radius:6px;
  box-shadow:0 2px 5px rgba(0,0,0,0.05);
  margin-bottom:1rem;
}

.badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:20px;
  background:var(--accent);
  color:white;
  font-size:12px;
  margin-right:5px;
}

.tabs{display:flex;overflow-x:auto;gap:0.5rem;margin-bottom:1rem;}

.tabs button{
  padding:0.5rem 1rem;
  border:none;
  background:#ddd;
  border-radius:20px;
  cursor:pointer;
  white-space:nowrap;
}

.tabs button.active{background:var(--primary);color:white;}

.tab-content{
  background:white;
  padding:1rem;
  border-radius:6px;
  box-shadow:0 2px 5px rgba(0,0,0,0.05);
}

.card{margin-bottom:1rem;}
.card h4{margin-bottom:0.5rem;color:var(--primary);}

ul{padding-left:1rem;margin-top:0.5rem;}

.ph-meter{
  height:20px;
  background:linear-gradient(to right, red, orange, yellow, green, blue);
  border-radius:20px;
  position:relative;
  margin-top:10px;
}

.ph-indicator{
  width:3px;
  height:30px;
  background:black;
  position:absolute;
  top:-5px;
}

.accordion{
  background:#e8f5e9;
  border:none;
  padding:10px;
  width:100%;
  text-align:left;
  cursor:pointer;
  margin-top:5px;
  border-radius:5px;
  font-weight:bold;
}

.panel{
  display:none;
  padding:10px;
  border-left:3px solid var(--primary);
  background:#f9f9f9;
}

footer{text-align:center;padding:1rem;font-size:0.8rem;color:#777;}

@media(min-width:768px){
  .container{flex-direction:row;}
  .sidebar{width:250px;border-right:1px solid #ddd;border-bottom:none;}
  .main{flex:1;}
}
</style>
</head>
<body>

<header>
  <h1 id="headerTitle">Agri Knowledge Base â€“ Pune Region</h1>
  <div class="top-controls">
    <input type="text" id="searchBox" placeholder="Search crop...">
    <button class="lang-toggle" onclick="toggleLanguage()">à¤®à¤°à¤¾à¤ à¥€</button>
  </div>
</header>

<div class="container">

  <div class="sidebar">
    <h3>Crops</h3>
    <div id="cropList"></div>
  </div>

  <div class="main">
    <div id="snapshot" class="snapshot"></div>
    <canvas id="yieldChart" height="100"></canvas>
    <div id="tabs" class="tabs"></div>
    <div id="tabContent" class="tab-content"></div>
  </div>

</div>

<footer>
  Designed for Pune Region Farmers | Upgraded Phase
</footer>

<script>

let currentLang = "en";

const crops = [{
  id:"onion",
  name:{en:"Onion",mr:"à¤•à¤¾à¤‚à¤¦à¤¾"},
  localName:"Kanda",
  scientific:"Allium cepa",
  duration:"110â€“130 days",
  season:"Kharif & Rabi",
  water:"Moderate",
  soil:"Loamy, Well-drained",
  yield:"250â€“350 q/ha",
  soilPHValue:6.5,

  overview:{
    type:"Biennial grown as annual",
    ediblePart:"Bulb",
    rootSystem:"Fibrous"
  },

  soilClimate:{
    soilPH:"6.0 â€“ 7.5",
    rainfall:"500â€“750 mm",
    temperature:"13â€“25Â°C optimal",
    drainage:"Excellent drainage required"
  },

  waterManagement:{
    totalWater:"350â€“550 mm",
    criticalStages:["Bulb initiation","Bulb enlargement"],
    irrigationInterval:"5â€“10 days depending on stage",
    caution:"Avoid waterlogging"
  },

  nutrients:{
    NPK:"100:50:50 kg/ha",
    organic:"FYM 20â€“25 tons/ha",
    sulphur:"20â€“25 kg/ha improves bulb quality",
    schedule:"Split nitrogen application"
  },

  pestsDiseases:{
    pests:[{
      name:"Thrips",
      detail:"Thrips tabaci â€“ Silver streaks on leaves. ETL: 30 thrips/plant. Control: Spinosad 0.3 ml/L"
    }],
    diseases:[{
      name:"Purple Blotch",
      detail:"Alternaria porri â€“ Purple lesions. Spray Mancozeb 2.5 g/L"
    }]
  },

  calendar:[
    "Juneâ€“July: Nursery sowing (Kharif)",
    "Julyâ€“Aug: Transplanting",
    "Augâ€“Sept: Top dressing & weeding",
    "Octâ€“Nov: Harvest (Kharif)",
    "Decâ€“Jan: Rabi transplanting",
    "Marchâ€“April: Rabi harvest"
  ],

  varieties:["N-53","Baswant-780","Agrifound Light Red"],

  economics:{
    cost:"â‚¹1.2â€“1.5 lakh/ha",
    storage:"4â€“6 months (Rabi)",
    marketPeak:"Mayâ€“June"
  },

  postHarvest:{
    curing:"7â€“10 days shade curing",
    storageTemp:"25â€“30Â°C",
    humidity:"65â€“70%"
  },

  doDont:{
    do:["Use certified seed","Ensure proper drainage","Split nitrogen application"],
    dont:["Avoid over irrigation","Avoid continuous onion cropping","Avoid excess nitrogen late stage"]
  }

}];

const cropList = document.getElementById("cropList");
const snapshot = document.getElementById("snapshot");
const tabs = document.getElementById("tabs");
const tabContent = document.getElementById("tabContent");

function loadCrop(crop){

  snapshot.innerHTML = `
    <h2>ðŸ§… ${crop.name[currentLang]} (${crop.localName})</h2>
    <p><strong>Scientific:</strong> ${crop.scientific}</p>
    <span class="badge">Season: ${crop.season}</span>
    <span class="badge">Duration: ${crop.duration}</span>
    <p><strong>Soil:</strong> ${crop.soil}</p>
    <p><strong>Water:</strong> ${crop.water}</p>
    <p><strong>Yield:</strong> ${crop.yield}</p>
  `;

  // Soil pH meter
  const phPosition = (crop.soilPHValue/14)*100;

  const sections = {
    "Overview":`
      <div class="card">
        <p><strong>Type:</strong> ${crop.overview.type}</p>
        <p><strong>Edible Part:</strong> ${crop.overview.ediblePart}</p>
        <p><strong>Root System:</strong> ${crop.overview.rootSystem}</p>
      </div>
    `,
    "Soil & Climate":`
      <div class="card">
        <p><strong>pH Range:</strong> ${crop.soilClimate.soilPH}</p>
        <div class="ph-meter"><div class="ph-indicator" style="left:${phPosition}%;"></div></div>
        <p><strong>Rainfall:</strong> ${crop.soilClimate.rainfall}</p>
        <p><strong>Temperature:</strong> ${crop.soilClimate.temperature}</p>
        <p><strong>Drainage:</strong> ${crop.soilClimate.drainage}</p>
      </div>
    `,
    "Water":`
      <div class="card">
        <p><strong>Total Water:</strong> ${crop.waterManagement.totalWater}</p>
        <p><strong>Irrigation Interval:</strong> ${crop.waterManagement.irrigationInterval}</p>
        <ul>${crop.waterManagement.criticalStages.map(s=>`<li>${s}</li>`).join("")}</ul>
        <p><strong>Caution:</strong> ${crop.waterManagement.caution}</p>
      </div>
    `,
    "Nutrients":`
      <div class="card">
        <p><strong>NPK:</strong> ${crop.nutrients.NPK}</p>
        <p><strong>Organic:</strong> ${crop.nutrients.organic}</p>
        <p><strong>Sulphur:</strong> ${crop.nutrients.sulphur}</p>
        <p><strong>Schedule:</strong> ${crop.nutrients.schedule}</p>
      </div>
    `,
    "Pests & Diseases":`
      ${crop.pestsDiseases.pests.map(p=>`
        <button class="accordion">${p.name}</button>
        <div class="panel"><p>${p.detail}</p></div>
      `).join("")}
      ${crop.pestsDiseases.diseases.map(d=>`
        <button class="accordion">${d.name}</button>
        <div class="panel"><p>${d.detail}</p></div>
      `).join("")}
    `,
    "Calendar":`<ul>${crop.calendar.map(c=>`<li>${c}</li>`).join("")}</ul>`,
    "Varieties":`<ul>${crop.varieties.map(v=>`<li>${v}</li>`).join("")}</ul>`,
    "Economics":`
      <p><strong>Cost:</strong> ${crop.economics.cost}</p>
      <p><strong>Storage:</strong> ${crop.economics.storage}</p>
      <p><strong>Market Peak:</strong> ${crop.economics.marketPeak}</p>
    `,
    "Post Harvest":`
      <p><strong>Curing:</strong> ${crop.postHarvest.curing}</p>
      <p><strong>Storage Temp:</strong> ${crop.postHarvest.storageTemp}</p>
      <p><strong>Humidity:</strong> ${crop.postHarvest.humidity}</p>
    `,
    "Do & Don't":`
      <div style="display:flex;gap:2rem;">
        <div><h4 style="color:green;">Do</h4><ul>${crop.doDont.do.map(d=>`<li>${d}</li>`).join("")}</ul></div>
        <div><h4 style="color:red;">Don't</h4><ul>${crop.doDont.dont.map(d=>`<li>${d}</li>`).join("")}</ul></div>
      </div>
    `
  };

  tabs.innerHTML="";
  tabContent.innerHTML="";

  Object.keys(sections).forEach((key,index)=>{
    const btn=document.createElement("button");
    btn.innerText=key;
    if(index===0){btn.classList.add("active");tabContent.innerHTML=sections[key];}
    btn.onclick=()=>{
      document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      tabContent.innerHTML=sections[key];
      initAccordion();
    };
    tabs.appendChild(btn);
  });

  initAccordion();
  initChart();
}

function initAccordion(){
  const acc = document.getElementsByClassName("accordion");
  for (let i = 0; i < acc.length; i++) {
    acc[i].onclick=function(){
      const panel=this.nextElementSibling;
      panel.style.display=panel.style.display==="block"?"none":"block";
    };
  }
}

function initChart(){
  const ctx=document.getElementById('yieldChart').getContext('2d');
  new Chart(ctx,{type:'line',data:{labels:['2019','2020','2021','2022','2023'],datasets:[{label:'Yield (q/ha)',data:[240,260,250,275,290],borderColor:'#2e7d32',fill:false}]}});
}

function toggleLanguage(){
  currentLang=currentLang==='en'?'mr':'en';
  document.querySelector('.lang-toggle').innerText=currentLang==='en'?'à¤®à¤°à¤¾à¤ à¥€':'English';
  loadCrop(crops[0]);
}

crops.forEach(c=>{
  const btn=document.createElement("button");
  btn.innerText=c.name.en;
  btn.onclick=()=>loadCrop(c);
  cropList.appendChild(btn);
});

loadCrop(crops[0]);

</script>

</body>
</html>
